(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var o=t(0),r=t(1),c=t(16),a=t.n(c),i=t(5),u=t(7),s=t(4);function h(e){var n=e.newName,t=(e.nameExists,e.phoneExists),r=(e.nAlreadyExist,e.pAlreadyExist),c=e.onChange,a=e.onSubmit;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsxs)("form",{onSubmit:t?r:a,children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{for:"name",children:"Name: "}),Object(o.jsx)("input",{value:n.name,onChange:c,name:"name"})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{for:"phone",children:"Phone: "}),Object(o.jsx)("input",{value:n.phone,onChange:c,name:"phone"})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})]})}function l(e){var n=e.person,t=e.deletePerson;return Object(o.jsxs)("li",{children:[" ",n.name," ",n.phone,Object(o.jsx)("button",{onClick:t,children:"delete"})]})}function j(e){var n=e.persons,t=e.deletePersonId;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)("ul",{children:n.map((function(e){return Object(o.jsx)(l,{person:e,deletePerson:function(){return t(e.id)}},e.name)}))})]})}function b(e){var n=e.search,t=e.onSubmit,r=e.onChange;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Search by name"}),Object(o.jsxs)("form",{onSubmit:t,children:[Object(o.jsx)("input",{value:n,onChange:r}),Object(o.jsx)("button",{type:"submit",children:"Search"})]})]})}var d=t(3),f=t.n(d),m="/api/persons",p=function(){return f.a.get(m).then((function(e){return e.data}))},O=function(e){return f.a.post(m,e).then((function(e){return e.data}))},x=function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return f.a.delete("".concat(m,"/").concat(e))};function g(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"error",children:n})}var w=function(){var e=Object(r.useState)({name:"",phone:""}),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)([{name:"",phone:""}]),l=Object(s.a)(a,2),d=l[0],f=l[1],m=Object(r.useState)(""),w=Object(s.a)(m,2),y=w[0],S=w[1],k=Object(r.useState)(""),E=Object(s.a)(k,2),C=E[0],P=E[1];Object(r.useEffect)((function(){p().then((function(e){f(e)}))}),[]);var N=d.filter((function(e){return e.name===t.name})).length>0,A=d.filter((function(e){return e.phone===t.phone})).length>0;var D={name:t.name,phone:t.phone};return Object(o.jsxs)("div",{children:[Object(o.jsx)(b,{onSubmit:function(e){return e.preventDefault(),d.filter((function(e){return e.name===y})).length>0?alert("".concat(y," is in the phonebook")):alert("There is no such contact")},onChange:function(e){S(e.target.value)},search:y}),Object(o.jsx)(h,{newName:t,nameExists:N,phoneExists:A,onChange:function(e){var n=e.target,t=n.value,o=n.name;c((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(i.a)({},o,t))}))},onSubmit:function(e){e.preventDefault();var n=d.find((function(e){return e.name===t.name}));n?window.confirm("".concat(t.name," is already in the phonebook, replace the old number with a new one?"))&&x(n.id,D).then((function(e){f(d.map((function(t){return t.id!==n.id?t:e}))),c({name:"",phone:""})})):(O(D).then((function(e){f(d.concat(e)),c({name:"",phone:""})})),P("".concat(D.name," was added to the Phonebook")),setTimeout((function(){P(null)}),5e3))},pAlreadyExist:function(e){e.preventDefault(),alert("".concat(t.phone," already exists in the phonebook"))}}),Object(o.jsx)(j,{persons:d,deletePersonId:function(e){window.confirm("Are you sure you want to delete this person")?v(e).then(f(d.filter((function(n){return n.id!==e})))).catch((function(e){alert("User has already been removed")})):alert("Nobody was deleted")}}),Object(o.jsx)(g,{message:C})]})};t(39);a.a.render(Object(o.jsx)(w,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.7654ab21.chunk.js.map