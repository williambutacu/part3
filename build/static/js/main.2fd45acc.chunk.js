(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t(1),c=t(16),a=t.n(c),i=t(5),u=t(7),s=t(4);function h(e){var n=e.newName,t=(e.nameExists,e.phoneExists),o=(e.nAlreadyExist,e.pAlreadyExist),c=e.onChange,a=e.onSubmit;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsxs)("form",{onSubmit:t?o:a,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{for:"name",children:"Name: "}),Object(r.jsx)("input",{value:n.name,onChange:c,name:"name"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{for:"phone",children:"Phone: "}),Object(r.jsx)("input",{value:n.phone,onChange:c,name:"phone"})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})]})}function l(e){var n=e.person,t=e.deletePerson;return Object(r.jsxs)("li",{children:[" ",n.name," ",n.phone,Object(r.jsx)("button",{onClick:t,children:"delete"})]})}function j(e){var n=e.persons,t=e.deletePersonId;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)("ul",{children:n.map((function(e){return Object(r.jsx)(l,{person:e,deletePerson:function(){return t(e.id)}},e.name)}))})]})}function d(e){var n=e.search,t=e.onSubmit,o=e.onChange;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Search by name"}),Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsx)("input",{value:n,onChange:o}),Object(r.jsx)("button",{type:"submit",children:"Search"})]})]})}var b=t(3),f=t.n(b),m="/api/persons",p=function(){return f.a.get(m).then((function(e){return e.data}))},O=function(e){return f.a.post(m,e).then((function(e){return e.data}))},x=function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return f.a.delete("".concat(m,"/").concat(e))};function g(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:"error",children:n})}var w=function(){var e=Object(o.useState)({name:"",phone:""}),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)([{name:"",phone:""}]),l=Object(s.a)(a,2),b=l[0],f=l[1],m=Object(o.useState)(""),w=Object(s.a)(m,2),y=w[0],S=w[1],k=Object(o.useState)(""),E=Object(s.a)(k,2),C=E[0],N=E[1];Object(o.useEffect)((function(){p().then((function(e){f(e)}))}),[]);var P=b.filter((function(e){return e.name===t.name})).length>0,A=b.filter((function(e){return e.phone===t.phone})).length>0;var D={name:t.name,phone:t.phone};function I(e){N("".concat(e)),setTimeout((function(){N(null)}),5e3)}return Object(r.jsxs)("div",{children:[Object(r.jsx)(d,{onSubmit:function(e){return e.preventDefault(),b.filter((function(e){return e.name===y})).length>0?alert("".concat(y," is in the phonebook")):alert("There is no such contact")},onChange:function(e){S(e.target.value)},search:y}),Object(r.jsx)(h,{newName:t,nameExists:P,phoneExists:A,onChange:function(e){var n=e.target,t=n.value,r=n.name;c((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(i.a)({},r,t))}))},onSubmit:function(e){e.preventDefault();var n=b.find((function(e){return e.name===t.name}));n?window.confirm("".concat(t.name," is already in the phonebook, replace the old number with a new one?"))&&x(n.id,D).then((function(e){f(b.map((function(t){return t.id!==n.id?t:e}))),c({name:"",phone:""})})).catch((function(e){return I(e.response.data.error)})):O(D).then((function(e){f(b.concat(e)),c({name:"",phone:""}),I("".concat(D.name," was added to the phonebook"))})).catch((function(e){return I(e.response.data.error)}))},pAlreadyExist:function(e){e.preventDefault(),alert("".concat(t.phone," already exists in the phonebook"))}}),Object(r.jsx)(j,{persons:b,deletePersonId:function(e){window.confirm("Are you sure you want to delete this person")?v(e).then(f(b.filter((function(n){return n.id!==e})))).catch((function(e){alert("User has already been removed")})):alert("Nobody was deleted")}}),Object(r.jsx)(g,{message:C})]})};t(39);a.a.render(Object(r.jsx)(w,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.2fd45acc.chunk.js.map